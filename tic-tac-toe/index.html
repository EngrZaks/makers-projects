<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Tic-Tac-Toe</title>
      <link rel="stylesheet" href="style.css" />
   </head>
   <body>
      <main class="game-wrapper">
         <div class="game-board">
            <h1>Tic-Tac-Toe Game</h1>
            <p>player <span class="player">X</span> your turn</p>
            <table>
               <tr>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
               </tr>
               <tr>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
               </tr>
               <tr>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
               </tr>
            </table>
            <p class="winner">player <span class="player">x</span> wins</p>
            <button>New Game</button>
         </div>
      </main>
      <script>
         window.onload = () => {
            const boxes = document.querySelectorAll("td");
            const Player = document.querySelector(".player");
            const winner = document.querySelector(".winner");
            let currentPlayer = "X";
            let gameOn = true;
            let numberOfPlay = 0;
            boxes.forEach((box) => {
               box.addEventListener("click", (e) => {
                  if (box.style.opacity == 0 && gameOn) {
                     box.innerHTML = currentPlayer;
                     currentPlayer = currentPlayer == "X" ? "O" : "X";
                     Player.innerHTML = currentPlayer;
                     box.style.opacity = 1;
                     numberOfPlay++;
                     if (
                        boxes[0].innerHTML == boxes[1].innerHTML &&
                        boxes[1].innerHTML == boxes[2].innerHTML &&
                        boxes[0].innerHTML != 0
                     ) {
                        showWinner(boxes[0], boxes[1], boxes[2]);
                     } else if (
                        boxes[3].innerHTML == boxes[4].innerHTML &&
                        boxes[4].innerHTML == boxes[5].innerHTML &&
                        boxes[3].innerHTML != 0
                     ) {
                        showWinner(boxes[3], boxes[4], boxes[5]);
                     } else if (
                        boxes[6].innerHTML == boxes[7].innerHTML &&
                        boxes[7].innerHTML == boxes[8].innerHTML &&
                        boxes[6].innerHTML != 0
                     ) {
                        showWinner(boxes[6], boxes[7], boxes[8]);
                     } else if (
                        boxes[0].innerHTML == boxes[3].innerHTML &&
                        boxes[3].innerHTML == boxes[6].innerHTML &&
                        boxes[0].innerHTML != 0
                     ) {
                        showWinner(boxes[0], boxes[3], boxes[6]);
                     } else if (
                        boxes[1].innerHTML == boxes[4].innerHTML &&
                        boxes[4].innerHTML == boxes[7].innerHTML &&
                        boxes[1].innerHTML != 0
                     ) {
                        showWinner(boxes[1], boxes[4], boxes[7]);
                     } else if (
                        boxes[2].innerHTML == boxes[5].innerHTML &&
                        boxes[5].innerHTML == boxes[8].innerHTML &&
                        boxes[2].innerHTML != 0
                     ) {
                        showWinner(boxes[2], boxes[5], boxes[8]);
                     } else if (
                        boxes[0].innerHTML == boxes[4].innerHTML &&
                        boxes[4].innerHTML == boxes[8].innerHTML &&
                        boxes[0].innerHTML != 0
                     ) {
                        showWinner(boxes[0], boxes[4], boxes[8]);
                     } else if (
                        boxes[2].innerHTML == boxes[4].innerHTML &&
                        boxes[4].innerHTML == boxes[6].innerHTML &&
                        boxes[2].innerHTML != 0
                     ) {
                        showWinner(boxes[2], boxes[4], boxes[6]);
                     }
                  }
               });
            });
            function showWinner(x, y, z) {
               const items = [x, y, z];
               items.forEach((item) => {
                  item.classList.add("show-winner");
               });
               document.querySelector(".winner .player").innerHTML =
                  currentPlayer == "X" ? "O" : "X";
               winner.style.opacity = 1;
               gameOn = false;
               window.navigator.vibrate(200);
            }
            document.querySelector("button").addEventListener("click", (e) => {
               gameOn = true;
               boxes.forEach((box) => {
                  box.style.opacity = 0;
                  box.innerHTML = 0;
                  box.classList.remove("show-winner");
               });
               winner.style.opacity = 0;
               Player.innerHTML = "X";
            });
         };
      </script>
   </body>
</html>
