<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>HotOrCols</title>
      <link rel="stylesheet" href="style.css" />
   </head>
   <body>
      <div class="game-wrapper">
         <div class="game">
            <h1>Hot or Cold Game</h1>
            <p>Guess a number between 0 and 100 to play</p>
            <div class="result">
               <p>Status: <span class="status"></span></p>
            </div>
            <p>Trials: <span class="trials"></span></p>
            <form>
               <label for="guess"></label>
               <input
                  type="text"
                  name="guess"
                  id="guess"
                  value=""
                  placeholder="Input your guess"
               />
               <button>Play</button> <span class="restart">restart</span>
            </form>
         </div>
      </div>
      <script>
         window.onload = playGame;
         function playGame() {
            console.log("game loaded");
            const randValue = Math.floor(Math.random() * 100);
            const form = document.querySelector("form");
            const result = document.querySelector(".result");
            const status = document.querySelector(".status");
            const trials = document.querySelector(".trials");
            let statusText;
            let statusColor;
            let numberOfTrial = 0;
            trials.textContent = numberOfTrial;
            let lastGuessDifference = 0;
            form.addEventListener("submit", (e) => {
               e.preventDefault();
               const guess = form.guess.value;
               const differece = Math.abs(guess - randValue);
               if (guess == randValue) {
                  statusText = `game won in ${numberOfTrial + 1} trials`;
                  statusColor = "purple";
                  console.log(statusText);
               } else {
                  if (lastGuessDifference < differece) {
                     statusText = "colder";
                     statusColor = "blue";
                     console.log(statusText);
                  } else if (lastGuessDifference > differece) {
                     statusText = "hotter";
                     statusColor = "red";
                     console.log(statusText);
                  } else if (lastGuessDifference == differece) {
                     statusText = "neither colder nor hoter";
                     statusColor = "black";
                     console.log(statusText);
                  }
               }
               status.textContent = statusText;
               status.style.color = statusColor;
               result.classList.add("flash");
               setInterval(() => {
                  result.classList.remove("flash");
               }, 500);
               console.log(guess, randValue, differece);
               lastGuessDifference = differece;
               numberOfTrial++;
               trials.textContent = numberOfTrial;
            });
         }
      </script>
   </body>
</html>
